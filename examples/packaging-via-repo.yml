---
apiVersion: packaging.carvel.dev/v1alpha1
kind: PackageRepository
metadata:
  name: basic.test.carvel.dev
  # cluster scoped
spec:
  fetch:
    git:
      url: https://github.com/vmware-tanzu/carvel-kapp-controller
      ref: origin/pkg-poc
      subPath: examples/pkgrepository
---
apiVersion: packaging.carvel.dev/v1alpha1
kind: PackageInstall
metadata:
  name: installed-pkg-test-in-repo
  namespace: default
spec:
  serviceAccountName: default-ns-sa
  packageVersionRef:
    packageName: pkg2.test.carvel.dev
    versionSelection:
      constraint: 2.0.0
  values:
  - secretRef:
      name: installed-pkg-test-in-repo-values
---
apiVersion: v1
kind: Secret
metadata:
  name: installed-pkg-test-in-repo-values
stringData:
  values.yml: |
    #@data/values
    ---
    hello_msg: "hi"
